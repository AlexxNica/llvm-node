language: node_js
compiler: clang
node_js:
  - "node"
  - "6"
  - "5"
  - "4"

cache: yarn

before_install:
  - sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y
  - curl http://apt.llvm.org/llvm-snapshot.gpg.key | sudo apt-key add -
  - echo "deb http://apt.llvm.org/precise/ llvm-toolchain-precise-4.0 main" | sudo tee -a /etc/apt/sources.list
  - sudo apt-get update -qq
  - sudo apt-get install clang-4.0 clang++-4.0 llvm-4.0 llvm-4.0-dev
  - export CC=clang-4.0
  - export CXX=clang++-4.0
  - llvm-config-4.0 --includedir
  - llvm-config-4.0 --cppflags

# https://github.com/travis-ci/apt-source-whitelist/pull/361
#addons:
#  apt:
#    sources:
#      - ubuntu-toolchain-r-test
#      - llvm-toolchain-precise-4.0
#    packages:
#      - clang-4.0
#      - llvm-4.0
#      - llvm-4.0-dev
#      - build-essential

install:
  - npm install --LLVM_CONFIG=llvm-config-4.0
